{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://structuredcontext.dev/schema/domain-manifest.schema.json",
  "title": "SCS Domain Manifest",
  "description": "Schema for domain manifest files that define domain-specific content schemas, templates, and validation rules.",
  "type": "object",
  "required": ["domain"],
  "properties": {
    "domain": {
      "type": "object",
      "required": ["id", "name", "version", "description", "concerns", "schemas"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^domain:[a-z][a-z0-9-]*$",
          "description": "Unique domain identifier using domain: prefix (e.g., domain:software-development, domain:legal, domain:clinical)"
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "description": "Human-readable domain name"
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Semantic version of this domain definition (e.g., 1.0.0)"
        },
        "description": {
          "type": "string",
          "minLength": 1,
          "description": "Description of what this domain covers and its intended use cases"
        },
        "concerns": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string",
            "pattern": "^bundle:[a-z][a-z0-9-]*:[0-9]+\\.[0-9]+\\.[0-9]+$"
          },
          "description": "List of concern bundle references with versions (e.g., bundle:architecture:1.0.0, bundle:security:1.0.0)"
        },
        "author": {
          "type": "string",
          "description": "Author or organization that created this domain"
        },
        "license": {
          "type": "string",
          "enum": ["open", "commercial", "custom"],
          "description": "License type for this domain"
        },
        "license_url": {
          "type": "string",
          "format": "uri",
          "description": "URL to full license text"
        },
        "homepage": {
          "type": "string",
          "format": "uri",
          "description": "Homepage or documentation URL for this domain"
        },
        "schemas": {
          "type": "object",
          "required": ["meta", "standards", "project"],
          "description": "Content schemas for each SCD tier",
          "properties": {
            "meta": {
              "type": "object",
              "required": ["content_schema"],
              "properties": {
                "content_schema": {
                  "type": "string",
                  "description": "Path to JSON Schema file defining meta-tier content structure"
                },
                "template": {
                  "type": "string",
                  "description": "Path to template file for creating new meta-tier SCDs"
                }
              }
            },
            "standards": {
              "type": "object",
              "required": ["content_schema"],
              "properties": {
                "content_schema": {
                  "type": "string",
                  "description": "Path to JSON Schema file defining standards-tier content structure"
                },
                "template": {
                  "type": "string",
                  "description": "Path to template file for creating new standards-tier SCDs"
                }
              }
            },
            "project": {
              "type": "object",
              "required": ["content_schema"],
              "properties": {
                "content_schema": {
                  "type": "string",
                  "description": "Path to JSON Schema file defining project-tier content structure"
                },
                "template": {
                  "type": "string",
                  "description": "Path to template file for creating new project-tier SCDs"
                }
              }
            }
          },
          "additionalProperties": false
        },
        "validation": {
          "type": "object",
          "description": "Domain-specific validation rules and constraints",
          "properties": {
            "rules": {
              "type": "string",
              "description": "Path to validation rules file"
            },
            "custom_validators": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "List of custom validator plugin paths"
            }
          }
        },
        "templates": {
          "type": "object",
          "description": "Bundle templates for this domain",
          "properties": {
            "bundle_templates": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["name", "path"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Template name"
                  },
                  "description": {
                    "type": "string",
                    "description": "Template description"
                  },
                  "path": {
                    "type": "string",
                    "description": "Path to bundle template file"
                  }
                }
              }
            }
          }
        },
        "examples": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of example bundle paths demonstrating domain usage"
        },
        "dependencies": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^domain:[a-z][a-z0-9-]*:[0-9]+\\.[0-9]+\\.[0-9]+$"
          },
          "description": "Other domains this domain depends on (with versions)"
        },
        "metadata": {
          "type": "object",
          "description": "Additional domain metadata",
          "properties": {
            "tags": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Tags for categorizing this domain"
            },
            "industry": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Industries this domain is applicable to"
            },
            "use_cases": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Common use cases for this domain"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
